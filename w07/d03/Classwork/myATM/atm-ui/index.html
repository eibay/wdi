<!doctype html>
<html>
  <head>
    <title>ATM</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <article>
      <header>
        <p>Rosenbank</p>
      </header>
      <div class="account checking">
        <h2>Checking</h2>
        <div class="balance">$0</div>
        <input name="amount" />
        <button class="deposit">Deposit</button>
        <button class="withdraw">Withdraw</button>
      </div>

      <div class="account savings">
        <h2>Savings</h2>
        <div class="balance">$0</div>
        <input name="amount" />
        <button class="deposit">Deposit</button>
        <button class="withdraw">Withdraw</button>
      </div>
    </article>
    <script>
      var getAccount = function(which) {
        var account = document.getElementsByClassName(which);
        return account
      }

      var getAmount = function(which) {
        account = getAccount(which)
        var amount = parseInt(account[0].children[2].value);
        account[0].children[2].value = "";
        return amount;
      }

      var getBalance = function(which) {
        account = getAccount(which);
        var balance = parseInt(account[0].children[1].innerText.split("$")[1]);
        return balance;
      }

      var newBalance = function(which, number) {
        // localStorage.setItem(which, number);
        account = getAccount(which);
        account[0].children[1].innerText = "$" + number.toString();
      }

      var deposit = function(which) {
        balance = getBalance(which);
        amount = getAmount(which)
        balance += amount;
        newBalance(which, balance);
      }

      function withdraw(which) {
        balance = getBalance(which);
        amount = getAmount(which)
        if (which == "savings" && amount > balance) {
          window.alert("Insufficient funds, you only have " + balance.toString() + " in " + which);
        } else if (which == "checking" && amount > balance) {
          amount -= balance;
          balance = 0;
          newBalance("checking", balance);
          savings = getBalance("savings");
          balance = savings - amount;
          newBalance("savings", balance);
        }else {
          balance -= amount;
          newBalance(which, balance);
        }
      }

      checking = getAccount("checking");
      var depositChecking = checking[0].children[3];
      depositChecking.addEventListener("click", function(){
        deposit("checking");
      })
      var withdrawChecking = checking[0].children[4];
      withdrawChecking.addEventListener("click", function(){
        withdraw("checking");
      })

      savings = getAccount("savings");
      var depositSavings = savings[0].children[3];
      depositSavings.addEventListener("click", function(){
        deposit("savings");
      })
      var withdrawSavings = savings[0].children[4];
      withdrawSavings.addEventListener("click", function(){
        withdraw("savings");
      })
    </script>
  </body>
</html>
