<html>
<head>
	<title>Instagram API</title>
</head>
<body style="text-align:center">
	<h1 style="color:#2FCCBF">Instagram API</h1>

	<input id="location" placeholder="Enter Location" style="margin-bottom:20px"></input>
	<button>Search</button>

	<div id="pictures" style="overflow:scroll; width:700px; height:500px; margin:0 auto;"></div>

<script type="text/javascript">
  
  var button = document.querySelector("button");
  var input = document.getElementById("location");
  
  button.addEventListener("click", getImage )
  input.addEventListener("keypress", function(feed){
    if (feed.keyIdentifier=='Enter'){
      getImage();
    };
  });

  var ul = document.querySelector('div');

  function getImage() {
  
  //declaring variable for input  
    var location = document.getElementById("location").value;  
  
  //declaring a new XHR - AJAX THAT WILL MAKE AN API CALL 
    var xhr = new XMLHttpRequest();
  
  //ADDING AN EVENTLISTENER FOR WHEN THE CALL(OR (XHR.)RESPONSE, WHICH IS A JSON HASH) IS FINISHED LOADING...    
      xhr.addEventListener('load', function(){ 
        var jsonResponse = JSON.parse(xhr.response);
         
         //JSON HASH RETURNED WITH URLS. PARSE HASH AND PULL THE URL. CREATE AN IMAGE ELEMENT AND SET THE SRC= TO THE URL. APPEND THE ELEMENT TO UL VAR WHICH IS THE CSS SELECTOR 'DIV' IN MY HTML
        for (var i =0; i < jsonResponse.length; i++){
          var img= document.createElement("img")
          img.src = jsonResponse[i]["url"]
          ul.appendChild(img);
         };
        
      });
      
      //GETTING THE API CALL SET
      xhr.open('GET', '/' + encodeURIComponent(location))
      
      //MAKING THE API CALL
      xhr.send()
      
      //CLEARING THE INPUT TEXT BOX 
      input.value = ""
    };

	</script>

</body>
</html>